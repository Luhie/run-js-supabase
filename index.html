<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Space Next">
	<meta name="author" content="Luhie">
	<meta name="robots" content="noindex, nofollow">

	<link rel="icon" type="image/x-icon" href="https://img.icons8.com/?size=100&id=4IZ8RiC9K8go&format=png&color=000000" color="#0000">
	<link href="./static/css/common.css" rel="stylesheet" />

	<title>SOM</title>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.15.10/dist/sweetalert2.all.min.js" integrity="sha256-A9eg62yvWE5VANz+IGxBVsR7N9EWZmRsRwaGdR96vAc=" crossorigin="anonymous"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
</head>
<body>
<div class='container-fluid vh-100 w-100'>
	<div class='row justify-content-center h-100'>
		<div class="col-xl-3 col-lg-6 col-md-6 col-sm-7 col-8 m-auto">
			<div class="card">
				<form method='post' id='loginForm' name='loginForm'>
					<div class="card-header bg-warning fw-bold">Login</div>
					<div class="card-body">
						<div class='row'>
							<div class='form-group'>
								<label for='userId'>ID</label>
								<input type='text' class='form-control' id='userId' name='login'>
							</div>
							<div class='form-group mt-1'>
								<label for='userPW'>PW</label>
								<input type='password' class='form-control' id='userPw' name='login'>
							</div>
						</div>
					</div>
					<div class='card-footer text-center'>
						<button type='button' class='btn btn-warning w-100' onclick="loginProc()">로그인</button>
					</div>
				</form>
			</div>
		<div class="row justify-content-end col-xl-3 col-lg-6 col-md-6 col-sm-6 col-8 w-100 mt-1 m-auto">
			<a href='javascript:void' class='btn col-auto'>Join Us</a>
			<a href='javascript:void' class='btn col-auto'>Find Me</a>
		</div>	
		</div>
	</div>
</div>
</body>
<script>
console.group('모듈 위입니다');
console.log(userPw)
console.groupEnd('모듈 위입니다');
</script>
<script type="module">
	import { Cryption } from './static/js/cryption.js';
	import { Supabase } from './static/js/supabase.js';

	console.log('module 안입니다.')
	window.loginProc = async () =>{
		const crypt = new Cryption();
		const hash = crypt.getHash(userPw.value);

		const db = new Supabase('members');
		const where = {'user_id': userId.value};
		db.get("*",where)
		.then((v)=>{
			if( v == '' ) swal('일치하는 사용자가 없습니다.');
			else {
				const result = v[0];
				if(userId.value != v[0].user_id) return swal('아이디가 일치 하지 않습니다.');
				else {
					if(hash != v[0].user_pw) return swal('비밀번호가 일치 하지 않습니다.');
					else swal(`일치 ${v[0].user_name}환영합니다.`)
				}

			}
		});

	}




</script>
<script>
console.group('모듈 아래 입니다');

const userId = document.getElementById('userId');
const userPw = document.getElementById('userPw');

const swal = (text) => {
	const title = null;
	Swal.fire({
		title: title,
		text: text,
		width:300,
		padding:"0.3em",
		showClass: {
			popup: `
				animate__animated
				animate__fadeInDown
				animate__faster
			`
		},
		hideClass: {
			popup: `
				animate__animated
				animate__fadeOutUp
				animate__faster
			`
		},
		customClass: {
			confirmButton: 'swal-confirm-button',
			actions: 'no-margin-actions'
		}
	});

}
console.log(userPw.value)
console.groupEnd('모듈 아래 입니다');


/*** 비동기적으로 실행
function loadScript(src, callback){
let script = document.createElement('script');
script.src = src;

script.onload = () => callback(script);
document.head.append(script);
}
// loadScript('check.js', function(){
// 	console.log('onload')
// });

const showCircle = (cx, cy, radius) => {

}

const button = document.createElement('button');
button.innerText = 'showCircle';
button.style.color='red';
button.type='button';
document.body.appendChild(button);
button.addEventListener('click',() => {
const div = document.createElement('div');
div.style.borderRadius = '50%';
div.style.backgroundColor = 'red';
div.style.animationName = 'heropy';
div.style.animationDuration = '5s';
// div.style.width = '100px';
// div.style.height = '100px';
document.body.appendChild(div);
console.log('hello');

})

 ***/
</script>

</html>
